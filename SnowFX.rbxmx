<roblox xmlns:xmime="http://www.w3.org/2005/05/xmlmime" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.roblox.com/roblox.xsd" version="4">
	<Meta name="ExplicitAutoJoints">true</Meta>
	<External>null</External>
	<External>nil</External>
	<Item class="LocalScript" referent="RBXB11AEE74B72E4A47AF3CBF192238391F">
		<Properties>
			<bool name="Disabled">false</bool>
			<Content name="LinkedSource"><null></null></Content>
			<string name="Name">SnowFX</string>
			<string name="ScriptGuid">{80A772C1-ED31-47EC-8ABE-FFFE7F7559DA}</string>
			<ProtectedString name="Source"><![CDATA[--┌────────────────────┐
--│      nick540's     │
--│ Snow Effect System │
--├────────────────────┴──────────────────────────────────────────────────────────────────────────┐
--│                                         -≡ IMPORTANT ≡-                                       │
--│                    BY USEING THIS SYSTEM, YOU ARE AGREEING TO THE LICENSE.                    │
--│      THE LICENSE FOR THIS SYSTEM IS PROVIDED AS A CHILD TO THIS SCRIPT. (SnowFX.License)      │
--│     A COPY MAY BE OBTAINED AT:   https://github.com/R3velation/SnowFX/blob/master/LICENSE     │
--└───────────────────────────────────────────────────────────────────────────────────────────────┘

local EffectDestination = workspace -- Object the effect will be put under
local DefaultFog = {Color3:fromRGB(191, 191, 191),0,100000} -- Format: {Color3 FogColor, Number FogStart, Number FogEnd}
local DefaultOutdoorAmbient = Color3.fromRGB(173,173,173)
local DefaultExposure = 1.12
local OutdoorAmbient = {0,0} -- Hue and Saturation for the OutdoorAmbient
local FogColor = {0,0} -- Hue and Saturation for the FogColor
local DayV = 1 -- Value for the FogColor and OutdoorAmbient in HSV during the day
local NightV = 0.15  -- Value for the FogColor and OutdoorAmbient in HSV during the night
local FogStart = 0
local FogEnd = 150
local DayExposure = 1.35
local NightExposure = 0.32
local SkyFogTransparency = 0
-- These Variables should be a value equal to or between 0 and 1
local SnowMaxTransparency = 0.7
local SnowMinTransparency = 0.3
-- Please adjust these variables to be around the time that the day/night transition takes place for the latitude in Lighting.GeograpicLatitude
local HighCutoff = 0.6
local LowCutoff = 0.5

--┌───────────────┐
--│ END OF CONFIG │
--└───────────────┘

local RunService = game:GetService("RunService")
local Lighting =  game.Lighting
local Cam = workspace.CurrentCamera
local SnowSys = script.SnowSys:Clone()
local Enabled = SnowSys.Enabled.Value
local MD = SnowSys.MaxDistance
local Prt = SnowSys.Particle
local Snow = Prt.ParticleEmitter
local DayFog = Color3.fromHSV(FogColor[1],FogColor[2],DayV)
local NightFog = Color3.fromHSV(FogColor[1],FogColor[2],NightV)
local DayAmbiant = Color3.fromHSV(OutdoorAmbient[1],OutdoorAmbient[2],DayV)
local NightAmbiant = Color3.fromHSV(OutdoorAmbient[1],OutdoorAmbient[2],NightV)
local TimePercent
local TransitPercent

SnowSys.Parent = EffectDestination

--┌──────────────────┐
--│ UPDATE FUNCTIONS │
--└──────────────────┘

local function UpdatePosition()
	if Enabled then
		MD.CFrame = Cam.CFrame
		Prt.CFrame = Cam.CFrame
	end
end

local function AdjustEffect()
	if Enabled then 
		TimePercent = 1+-1*(0.5*math.cos(1*(math.rad(game.Lighting.ClockTime*15)))+0.5) -- Should be 0 when ClockTime = 0, 1 at 12, 0.5 at 6 or 18
		if TimePercent > LowCutoff and TimePercent < HighCutoff then
			TransitPercent = (TimePercent-LowCutoff)/(HighCutoff-LowCutoff)
			Lighting.FogColor = Color3.fromHSV(FogColor[1],FogColor[2],NightV * (1-TransitPercent) + (DayV*TransitPercent))
			Lighting.OutdoorAmbient = Color3.fromHSV(OutdoorAmbient[1],OutdoorAmbient[2],NightV * (1-TransitPercent) + (DayV*TransitPercent))
			Lighting.ExposureCompensation = NightExposure * (1-TransitPercent) + (DayExposure*TransitPercent)
			Snow.Transparency = NumberSequence.new (SnowMinTransparency * (1-TransitPercent) + (SnowMaxTransparency*TransitPercent))
		elseif TimePercent >= HighCutoff then
			Lighting.FogColor = DayFog
			Lighting.OutdoorAmbient = DayAmbiant
			Lighting.ExposureCompensation = DayExposure
			Snow.Transparency = NumberSequence.new (SnowMinTransparency)
		else
			Lighting.FogColor = NightFog
			Lighting.OutdoorAmbient = NightAmbiant
			Lighting.ExposureCompensation = NightExposure
			Snow.Transparency = NumberSequence.new (SnowMaxTransparency)
		end 
	end
end

local function ToggleEffect()
	if SnowSys.Enabled.Value then
		Enabled = true
		SnowSys.MaxDistance.Transparency = SkyFogTransparency
		SnowSys.Particle.ParticleEmitter.Enabled = true
		Lighting.FogStart = FogStart
		Lighting.FogEnd = FogEnd
		AdjustEffect()
	else
		Enabled = false
		SnowSys.MaxDistance.Transparency = 1
		SnowSys.Particle.ParticleEmitter.Enabled = false
		Lighting.OutdoorAmbient = DefaultOutdoorAmbient
		Lighting.FogColor = DefaultFog[1]
		Lighting.FogStart = DefaultFog[2]
		Lighting.FogEnd = DefaultFog[3]
	end
end
ToggleEffect()

--┌──────────────────┐
--│ ATTACH FUNCTIONS │
--└──────────────────┘

RunService.Heartbeat:Connect(UpdatePosition)
game.Lighting:GetPropertyChangedSignal("ClockTime"):connect(AdjustEffect)
SnowSys.Enabled:GetPropertyChangedSignal("Value"):connect(ToggleEffect)]]></ProtectedString>
			<BinaryString name="Tags"></BinaryString>
		</Properties>
		<Item class="Model" referent="RBXC0F2B80D76464C1EA04BABEF32299B92">
			<Properties>
				<CoordinateFrame name="ModelInPrimary">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
					<R00>1</R00>
					<R01>0</R01>
					<R02>0</R02>
					<R10>0</R10>
					<R11>1</R11>
					<R12>0</R12>
					<R20>0</R20>
					<R21>0</R21>
					<R22>1</R22>
				</CoordinateFrame>
				<string name="Name">SnowSys</string>
				<Ref name="PrimaryPart">null</Ref>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
			<Item class="MeshPart" referent="RBX959EBBC69A43496795507A39B3E93116">
				<Properties>
					<bool name="Anchored">true</bool>
					<float name="BackParamA">-0.5</float>
					<float name="BackParamB">0.5</float>
					<token name="BackSurface">0</token>
					<token name="BackSurfaceInput">0</token>
					<float name="BottomParamA">-0.5</float>
					<float name="BottomParamB">0.5</float>
					<token name="BottomSurface">0</token>
					<token name="BottomSurfaceInput">0</token>
					<CoordinateFrame name="CFrame">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
						<R00>0.999996543</R00>
						<R01>-1.00044417e-10</R01>
						<R02>2.98023224e-08</R02>
						<R10>-1.00044417e-10</R10>
						<R11>1</R11>
						<R12>-6.18456397e-11</R12>
						<R20>-2.98023224e-08</R20>
						<R21>-6.36646291e-11</R21>
						<R22>0.999996543</R22>
					</CoordinateFrame>
					<bool name="CanCollide">false</bool>
					<bool name="CastShadow">false</bool>
					<int name="CollisionGroupId">0</int>
					<Color3uint8 name="Color3uint8">4288914085</Color3uint8>
					<PhysicalProperties name="CustomPhysicalProperties">
						<CustomPhysics>true</CustomPhysics>
						<Density>0.00999999978</Density>
						<Friction>0.00999999978</Friction>
						<Elasticity>0.5</Elasticity>
						<FrictionWeight>1</FrictionWeight>
						<ElasticityWeight>1</ElasticityWeight>
					</PhysicalProperties>
					<float name="FrontParamA">-0.5</float>
					<float name="FrontParamB">0.5</float>
					<token name="FrontSurface">0</token>
					<token name="FrontSurfaceInput">0</token>
					<Vector3 name="InitialSize">
						<X>2</X>
						<Y>2</Y>
						<Z>1.99999905</Z>
					</Vector3>
					<float name="LeftParamA">-0.5</float>
					<float name="LeftParamB">0.5</float>
					<token name="LeftSurface">0</token>
					<token name="LeftSurfaceInput">0</token>
					<bool name="Locked">true</bool>
					<bool name="Massless">true</bool>
					<token name="Material">256</token>
					<Content name="MeshID"><url>rbxassetid://1483168750</url></Content>
					<Content name="MeshId"><url>rbxassetid://1483168750</url></Content>
					<string name="Name">MaxDistance</string>
					<SharedString name="PhysicalConfigData">1B2M2Y8AsgTpgAmY7PhCfg==</SharedString>
					<BinaryString name="PhysicsData">Q1NHUEhTAAAAAEJMT0NL</BinaryString>
					<float name="Reflectance">0</float>
					<token name="RenderFidelity">1</token>
					<float name="RightParamA">-0.5</float>
					<float name="RightParamB">0.5</float>
					<token name="RightSurface">0</token>
					<token name="RightSurfaceInput">0</token>
					<int name="RootPriority">0</int>
					<Vector3 name="RotVelocity">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<BinaryString name="Tags"></BinaryString>
					<Content name="TextureID"><null></null></Content>
					<float name="TopParamA">-0.5</float>
					<float name="TopParamB">0.5</float>
					<token name="TopSurface">0</token>
					<token name="TopSurfaceInput">0</token>
					<float name="Transparency">0</float>
					<Vector3 name="Velocity">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<Vector3 name="size">
						<X>500</X>
						<Y>500</Y>
						<Z>500</Z>
					</Vector3>
				</Properties>
			</Item>
			<Item class="MeshPart" referent="RBX76B4E9CB1DF44549805C983545B9E9F2">
				<Properties>
					<bool name="Anchored">true</bool>
					<float name="BackParamA">-0.5</float>
					<float name="BackParamB">0.5</float>
					<token name="BackSurface">0</token>
					<token name="BackSurfaceInput">0</token>
					<float name="BottomParamA">-0.5</float>
					<float name="BottomParamB">0.5</float>
					<token name="BottomSurface">0</token>
					<token name="BottomSurfaceInput">0</token>
					<CoordinateFrame name="CFrame">
						<X>42.2000427</X>
						<Y>28.4991608</Y>
						<Z>7.70001078</Z>
						<R00>0.999996543</R00>
						<R01>-1.00044417e-10</R01>
						<R02>2.98023224e-08</R02>
						<R10>-1.00044417e-10</R10>
						<R11>1</R11>
						<R12>-6.18456397e-11</R12>
						<R20>-2.98023224e-08</R20>
						<R21>-6.36646291e-11</R21>
						<R22>0.999996543</R22>
					</CoordinateFrame>
					<bool name="CanCollide">false</bool>
					<bool name="CastShadow">false</bool>
					<int name="CollisionGroupId">0</int>
					<Color3uint8 name="Color3uint8">4288914085</Color3uint8>
					<PhysicalProperties name="CustomPhysicalProperties">
						<CustomPhysics>true</CustomPhysics>
						<Density>0.00999999978</Density>
						<Friction>0.00999999978</Friction>
						<Elasticity>0.5</Elasticity>
						<FrictionWeight>1</FrictionWeight>
						<ElasticityWeight>1</ElasticityWeight>
					</PhysicalProperties>
					<float name="FrontParamA">-0.5</float>
					<float name="FrontParamB">0.5</float>
					<token name="FrontSurface">0</token>
					<token name="FrontSurfaceInput">0</token>
					<Vector3 name="InitialSize">
						<X>2</X>
						<Y>2</Y>
						<Z>1.99999905</Z>
					</Vector3>
					<float name="LeftParamA">-0.5</float>
					<float name="LeftParamB">0.5</float>
					<token name="LeftSurface">0</token>
					<token name="LeftSurfaceInput">0</token>
					<bool name="Locked">true</bool>
					<bool name="Massless">true</bool>
					<token name="Material">256</token>
					<Content name="MeshID"><url>rbxassetid://1483168750</url></Content>
					<Content name="MeshId"><url>rbxassetid://1483168750</url></Content>
					<string name="Name">Particle</string>
					<SharedString name="PhysicalConfigData">1B2M2Y8AsgTpgAmY7PhCfg==</SharedString>
					<BinaryString name="PhysicsData">Q1NHUEhTAAAAAEJMT0NL</BinaryString>
					<float name="Reflectance">0</float>
					<token name="RenderFidelity">1</token>
					<float name="RightParamA">-0.5</float>
					<float name="RightParamB">0.5</float>
					<token name="RightSurface">0</token>
					<token name="RightSurfaceInput">0</token>
					<int name="RootPriority">0</int>
					<Vector3 name="RotVelocity">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<BinaryString name="Tags"></BinaryString>
					<Content name="TextureID"><null></null></Content>
					<float name="TopParamA">-0.5</float>
					<float name="TopParamB">0.5</float>
					<token name="TopSurface">0</token>
					<token name="TopSurfaceInput">0</token>
					<float name="Transparency">1</float>
					<Vector3 name="Velocity">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<Vector3 name="size">
						<X>100</X>
						<Y>100</Y>
						<Z>100</Z>
					</Vector3>
				</Properties>
				<Item class="ParticleEmitter" referent="RBX74B5EB2AD66749E78DB6F85FF5BA883E">
					<Properties>
						<Vector3 name="Acceleration">
							<X>0</X>
							<Y>0.25</Y>
							<Z>0</Z>
						</Vector3>
						<ColorSequence name="Color">0 1 1 1 0 1 1 1 1 0 </ColorSequence>
						<float name="Drag">0</float>
						<token name="EmissionDirection">4</token>
						<bool name="Enabled">true</bool>
						<NumberRange name="Lifetime">100 150 </NumberRange>
						<float name="LightEmission">0</float>
						<float name="LightInfluence">0.899999976</float>
						<bool name="LockedToPart">false</bool>
						<string name="Name">ParticleEmitter</string>
						<float name="Rate">2500</float>
						<NumberRange name="RotSpeed">0 0 </NumberRange>
						<NumberRange name="Rotation">-180 180 </NumberRange>
						<NumberSequence name="Size">0 2.5 0 1 2.5 0 </NumberSequence>
						<NumberRange name="Speed">5 7.5 </NumberRange>
						<Vector2 name="SpreadAngle">
							<X>0</X>
							<Y>20</Y>
						</Vector2>
						<BinaryString name="Tags"></BinaryString>
						<Content name="Texture"><url>rbxassetid://2747708855</url></Content>
						<NumberSequence name="Transparency">0 0.5 0 1 0.5 0 </NumberSequence>
						<float name="VelocityInheritance">0</float>
						<float name="ZOffset">0</float>
					</Properties>
				</Item>
			</Item>
			<Item class="BoolValue" referent="RBX9B4194698C9C4D2A8E8AE0080B60B85E">
				<Properties>
					<string name="Name">Enabled</string>
					<BinaryString name="Tags"></BinaryString>
					<bool name="Value">true</bool>
				</Properties>
			</Item>
		</Item>
		<Item class="LocalScript" referent="RBX88D78ABFAA124610ACDBC154BB364F6E">
			<Properties>
				<bool name="Disabled">true</bool>
				<Content name="LinkedSource"><null></null></Content>
				<string name="Name">License</string>
				<string name="ScriptGuid">{AA1F1E82-FF35-4863-A5E9-BE2A9CEDA73E}</string>
				<ProtectedString name="Source"><![CDATA[--[[
BSD 3-Clause License

Copyright (c) 2019, R3velation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its
   contributors may be used to endorse or promote products derived from
   this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
--]]]]></ProtectedString>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
		</Item>
	</Item>
	<SharedStrings>
		<SharedString md5="1B2M2Y8AsgTpgAmY7PhCfg=="></SharedString>
	</SharedStrings>
</roblox>
